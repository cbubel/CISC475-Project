<a class="btn btn-primary float-right" href="#/add-student">Add Student</a>
<h1>Students</h1>
<div ng-controller="tableCtrl">
  <div>
    <hr>
    <form class="form-inline student-filters">
      <div class="form-group inline-student-form-filters">
        <label>First Name:</label><br>
        <input type="text" placeholder="First Name" ng-model="firstName" class="form-control">
      </div>
      <div class="form-group inline-student-form-filters">
        <label>Last Name:</label><br>
        <input type="text" placeholder="Last Name" ng-model="lastName" class="form-control">
      </div>
      <div class="form-group inline-student-form-filters">
        <label>Tags:</label><br>
        <input type="text" placeholder="Tags" ng-model="searchTags" class="form-control">
      </div>

      <div class="form-group" ng-init="showIsUndergrad = ''">
        <label>Class Year:</label><br>
        <div class="radio inline-student-form-filters">
          <label>Undergraduate:</label> <input type="radio" name="filterForClassLevel" ng-model="showIsUndergrad" ng-value="{isUndergrad:'true'}">
        </div>
        <div class="radio inline-student-form-filters">
          <label>Graduate:</label> <input type="radio" name="filterForClassLevel" ng-model="showIsUndergrad" ng-value="{isUndergrad:'false'}">
        </div>
        <div class="radio inline-student-form-filters">
          <label>All:</label> <input type="radio" name="filterForClassLevel" ng-model="showIsUndergrad" value="">
        </div>
      </div>

      <div class="form-group inline-student-form-filters">
        <label>&nbsp;</label><br>
        <button id="clear-filter" class="btn btn-danger btn-sm" ng-click="firstName='';lastName='';searchTags='';showIsUndergrad=''" type="button"> Clear Filters </button><br>
      </div>
    </form>


    <table class="table table-hover table-condensed table-striped">
      <thead class="levelOne">
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th></th>
        </tr>
      </thead>
      <tbody data-ng-repeat="student in students | filter:{first_name: firstName} | filter:{last_name: lastName} | filter:{tags: searchTags} | filter:showIsUndergrad track by student.firebaseId " data-ng-switch on="DataCollapse[$index]">
        <tr class="clickableRow" title="Click to toggle collapse/expand extra student info." data-ng-click="selectTableRow($index, student.id)" >
          <td>{{student.first_name}}</td>
          <td>{{student.last_name}}</td>
          <td>{{student.email}}</td>
          <td><a href="#/edit-student/{{student.firebaseId}}">Edit</a></td>
        </tr>
        <tr data-ng-switch-when="true">
          <td ng-if="student.isUndergrad" style="font-weight:bold">Undergraduate</td>
          <!--This is where sub-data goes-->
          <td ng-if="!student.isUndergrad" style="font-weight:bold">Graduate</td>
        <tr data-ng-switch-when="true">
          <td colspan="9" style="font-weight:bold">
            Schedule
            <div class="span12">
              <div class="pull-left">
                <table class="table table-hover table-condensed table-striped">
                  <thead class="levelTwo">
                    <tr>
                      <th>Course ID</th>
                      <th>Days</th>
                      <th>Start Time</th>
                      <th>End Time</th>
                    </tr>
                  </thead>
                  <tbody data-ng-repeat="class in student.schedule">
                    <tr>
                      <td>{{class.id}}</td>
                      <td>{{writeBusyDays(class)}}</td>
                      <td>{{class.start_time}}</td>
                      <td>{{class.end_time}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </td>
        </tr>
        <tr data-ng-switch-when="true">
          <td colspan="9" style="font-weight:bold">
            Grades
            <div class="span9">
              <div class="pull-left">
                <table class="table table-hover table-condensed table-striped">
                  <thead class="levelTwo">
                    <tr>
                      <th>Course ID</th>
                      <th>Grade</th>
                    </tr>
                  </thead>
                  <tbody data-ng-repeat="grade in student.grades">
                    <tr>
                      <td>{{grade.id}}</td>
                      <td>{{grade.letter_grade}}
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </td>
        </tr>
        <tr data-ng-switch-when="true">
          <td colspan="9" style="font-weight:bold">
            Tags
            <div class="span9">
              <div class="pull-left">
                <table class="table table-hover table-condensed table-striped">
                  <thead class="levelTwo" data-ng-repeat="tag in makeTagArray(student.tags)">
                    <tr>
                      <td>{{tag}}</td>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
          </td>
        </tr>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- End of table -->
</div>
